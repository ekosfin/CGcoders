import React, { useEffect } from "react";
import { Container, Row, Col } from "react-bootstrap";
import { useData } from "./contexts/DataContext";

export default function schedule() {
  const { data, getData } = useData();

  //hakee datan kun siirtyy sivulle
  useEffect(() => {
    getData();
  }, []);

  return (
    <Container className="grid-container" fluid>
      <Row style={{ paddingLeft: 0, paddingRight: 0 }}>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-material"></Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-large">Maanantai</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-large">Tiistai</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-large">Keskiviikko</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-large">Torstai</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-large">Perjantai</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-large">Lauantai / Sunnuntai</Col>

        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-small">Ma</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-small">Ti</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-small">Ke</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-small">To</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-small">Pe</Col>
        <Col style={{ paddingLeft: 0, paddingRight: 0 }} className="grid-weekday-small">La/ Su</Col>
      </Row>

      {data.map((material, index1) => (
        <Row className="" key={index1}>
          <Col
            style={{ paddingLeft: 0, paddingRight: 0 }}
            className="grid-material"
          >
            {material.materialName}
          </Col>
          {material.data.map((dataItem, index2) => (
            <Col
              style={{ paddingLeft: 0, paddingRight: 0 }}
              className="grid-item-container"
              key={index2}
            >
              {dataItem.map((dayData, index3) => (
                <div style={{ backgroundColor: dayData.color }} className="grid-item" key={index3}>
                  {dayData.dayInfo.length > 0 ? (
                    <div>
                      <div className="grid-text-bold">{dayData.dayItem}</div>
                      <div className="grid-info">{dayData.dayInfo}</div>
                    </div>
                  ) : (
                    <div>
                      <div className="grid-text-normal">{dayData.dayItem}</div>
                    </div>
                  )}
                </div>
              ))}
            </Col>
          ))}
        </Row>
      ))}
    </Container>
  );
}
